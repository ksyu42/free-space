<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>スペース一覧（管理者）</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/admin_space.css}">
    <!-- 外部JavaScriptを読み込む -->
    <script th:src="@{/javascript/updateSeat.js}" defer></script>
</head>
<body>

<!-- 🔗 ナビゲーション -->
<div class="navigation">
    <div class="nav-right">
        <a th:href="@{/admin/dashboard}" class="btn">トップ</a>
        <a th:href="@{/logout}" class="btn">ログアウト</a>
    </div>
</div>

<!-- タイトル -->
<div class="title-bar">
    <h1>スペース一覧（管理者）</h1>
</div>

<!-- 新規スペース作成ボタン -->
<a th:href="@{/admin/space/new}" class="btn">スペース作成</a>

<!-- スペースごとのカード -->
<div th:each="space : ${spaceList}" class="space-card">

    <!-- スペース名＋場所 -->
    <h2 th:text="${space.name} + '（' + ${space.location} + '）'"></h2>

    <!-- スペース削除フォーム -->
    <form th:action="@{/admin/space/delete/{id}(id=${space.id})}" method="post"
			onsubmit="return confirm('このスペースを削除してもよろしいですか？');">
		<button type="submit" class="btn btn-danger">スペースを削除</button>
    </form>


    <!-- 座席数テーブル -->
    <table>
        <thead>
            <tr>
                <th>時間帯</th>
                <th>座席数</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="ts, iterStat : ${spaceTimeMap[space.id]}">
                <td th:text="${ts.time}"></td>

                <!-- 各時間帯の座席数表示用ID -->
                <td th:id="'seatCount-' + ${space.id} + '-' + ${iterStat.index}"
                    th:text="${ts.seatCount}"></td>

                <!-- ＋/－ボタンで座席増減 -->
                <td>
                    <button type="button"
                            th:attr="onclick='changeSeat(' + ${space.id} + ',' + ${iterStat.index} + ',1)'">＋</button>
                    <button type="button"
                            th:attr="onclick='changeSeat(' + ${space.id} + ',' + ${iterStat.index} + ',-1)'">－</button>
                </td>
            </tr>
        </tbody>
    </table>
</div>

</body>
</html>
