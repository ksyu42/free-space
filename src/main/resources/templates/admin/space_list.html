<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>スペース管理</title>

    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
    <link rel="stylesheet" th:href="@{/css/admin_spaces.css}">

    <!-- 座席数操作用 JS -->
    <script th:src="@{/js/admin-seat.js}"></script>
</head>
<body>

<!-- ナビ -->
<div class="navigation">
    <div class="nav-left"></div>
    <div class="nav-right">
        <a th:href="@{/admin/space/new}" class="btn">＋ スペースを作成</a>
        <a th:href="@{/logout}" class="btn">ログアウト</a>
    </div>
</div>

<!-- タイトル -->
<div class="title-bar">
    <h1>スペース管理</h1>
</div>

<!-- スペース一覧 -->
<div class="space-list">

    <div class="space-card" th:each="space : ${spaceList}">

        <!-- スペース基本情報 -->
        <h2 th:text="${space.name}">スペース名</h2>
        <p class="location" th:text="${space.location}">場所</p>

        <!-- 時間帯・座席数テーブル -->
        <table class="seat-table">
            <thead>
                <tr>
                    <th>時間帯</th>
                    <th>座席数</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>

                <!-- 時間帯ごと -->
                <tr th:each="time : ${timeList}">
                    <td th:text="${time.time}">09:00〜10:00</td>

                    <td>
                        <span
                            th:id="'seatCount-' + ${space.id} + '-' + ${time.spaceTimesId}"
                            th:text="${seatMap[space.id + '-' + time.spaceTimesId] != null
                                      ? seatMap[space.id + '-' + time.spaceTimesId]
                                      : 0}">
                            0
                        </span>
                    </td>

                    <td class="seat-btns">
					    <button type="button"
					            th:onclick="'changeSeat(' + ${space.id} + ',' + ${time.spaceTimesId} + ',1)'">
					        ＋
					    </button>
					
					    <button type="button"
					            th:onclick="'changeSeat(' + ${space.id} + ',' + ${time.spaceTimesId} + ',-1)'">
					        −
					    </button>
					</td>

                </tr>

            </tbody>
        </table>

        <!-- スペース削除 -->
        <form th:action="@{/admin/space/delete/{id}(id=${space.id})}"
              method="post"
              onsubmit="return confirm('このスペースを削除しますか？');">
            <button type="submit" class="delete-btn">削除</button>
        </form>

    </div>

</div>

</body>
</html>
