<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>予約管理</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/admin.css}">
</head>
<body>

    <div class="navigation">
        <div class="nav-left">&nbsp;</div>
        <div class="nav-right">
            <a th:href="@{/admin/spaces}" class="btn">スペース一覧</a>
            <a th:href="@{/admin/logout}" class="btn">ログアウト</a>
        </div>
    </div>

    <div class="title-bar">
        <h1>予約管理</h1>
    </div>

    <div class="admin-area">

        <table class="space-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>ユーザーID</th>
                    <th>スペースID</th>
                    <th>予約日</th>
                    <th>時間帯ID</th>
                    <th>状態</th>
                    <th>操作</th>
                </tr>
            </thead>

            <tbody>
                <tr th:each="r : ${reservationList}">
                    <td th:text="${r.id}"></td>
                    <td th:text="${r.userId}"></td>
                    <td th:text="${r.spaceId}"></td>
                    <td th:text="${r.reservationDay}"></td>
                    <td th:text="${r.spaceTimesId}"></td>

                    <!-- 【修正点】英語ステータス → 日本語表示 -->
                    <td th:switch="${r.status}">
                        <span th:case="'PENDING'">承認待ち</span>
                        <span th:case="'APPROVED'">承認済み</span>
                        <span th:case="'REJECTED'">却下</span>
                        <span th:case="'CANCELLED'">キャンセル</span>
                        <span th:case="'USED'">利用済み</span>
                        <span th:case="*">不明</span>
                    </td>

                    <td>
                        <!-- 承認/却下（既存仕様に合わせて） -->
                        <form th:if="${r.status == 'PENDING'}"
                              th:action="@{'/admin/reservations/' + ${r.id} + '/approve'}"
                              method="post" style="display:inline;">
                            <button type="submit" class="btn-orange">承認</button>
                        </form>

                        <form th:if="${r.status == 'PENDING'}"
                              th:action="@{'/admin/reservations/' + ${r.id} + '/reject'}"
                              method="post" style="display:inline;">
                            <button type="submit" class="delete-btn">却下</button>
                        </form>
                    </td>
                </tr>
            </tbody>
        </table>

        <div style="margin-top: 16px;">
            <a th:href="@{/admin/dashboard}" class="btn">ダッシュボードへ戻る</a>
        </div>

    </div>

</body>
</html>
