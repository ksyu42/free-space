<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>予約画面</title>
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/reservation.css}">
</head>
<body>

    <!-- ナビゲーション -->
    <div class="navigation">
        <div class="nav-left">
            <span class="login-user" th:text="${session.loginUser.name + 'さんログイン中'}"></span>
        </div>
        <div class="nav-right">
            <a th:href="@{/space}" class="btn">スペース一覧</a>
            <a th:href="@{/mypage}" class="btn">マイページ</a>
            <a th:href="@{/logout}" class="btn">ログアウト</a>
        </div>
    </div>

    <h1>予約内容の入力</h1>

    <!-- エラーメッセージ -->
    <div class="message error" th:if="${errorlist}">
        <div th:each="e : ${errorlist}" th:text="${e}"></div>
    </div>

    <div class="reservation-card">
        <div class="space-item">
            <strong>スペース名：</strong>
            <span th:text="${item.name}"></span>
        </div>
        <div class="space-item">
            <strong>場所：</strong>
            <span th:text="${item.location}"></span>
        </div>

        <form th:action="@{/reserve/complete}" method="post">

            <!-- hidden -->
            <input type="hidden" name="spaceId" th:value="${item.id}" />

            <div class="space-item">
                <strong>予約日：</strong>
                <input type="date" name="reservationDay" th:value="${defaultDate}" required>
            </div>

            <div class="space-item">
                <strong>時間帯：</strong>
                <select name="spaceTimesId" required>
                    <option value="">選択してください</option>
                    <option th:each="t : ${timeList}"
                            th:value="${t.spaceTimesId}"
                            th:text="${t.time}"
                            th:disabled="${!t.hasVacancy}">
                    </option>
                </select>
                <div class="note">※満席の時間帯は選択できません。</div>
            </div>

            <div class="button-wrapper">
                <button type="submit" class="btn-orange">予約を確定する</button>
            </div>
        </form>
    </div>

</body>
</html>
